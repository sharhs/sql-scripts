USE [opendb]
GO

/****** Object:  SqlAssembly [UDP.FileIO]    Script Date: 10.03.2022 11:44:52 ******/
CREATE ASSEMBLY [UDP.FileIO]
FROM 0x4D5A90000300000004000000FFFF0000B800000000000000400000000000000000000000000000000000000000000000000000000000000000000000800000000E1FBA0E00B409CD21B8014CCD21546869732070726F6772616D2063616E6E6F742062652072756E20696E20444F53206D6F64652E0D0D0A2400000000000000504500004C010300CEA0804F0000000000000000E00002210B010800001200000006000000000000BE3000000020000000400000000040000020000000020000040000000000000004000000000000000080000000020000000000000300408500001000001000000000100000100000000000001000000000000000000000006830000053000000004000002003000000000000000000000000000000000000006000000C000000E42F00001C0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000200000080000000000000000000000082000004800000000000000000000002E74657874000000C4100000002000000012000000020000000000000000000000000000200000602E7273726300000020030000004000000004000000140000000000000000000000000000400000402E72656C6F6300000C0000000060000000020000001800000000000000000000000000004000004200000000000000000000000000000000A0300000000000004800000002000500D0220000140D000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001B3002002C0000000100001102281200000A0A06731300000A0B07066F1400000A696F1500000A0CDE07076F1600000ADC08731700000A2A0110000002000E00101E0007000000001B3002003B0000000200001102281800000A0A042C0F06281900000A2D0706281A00000A2602281B00000A731C00000A0B07036F1D00000A6F1E00000ADE07076F1F00000ADC2A0001100000020025000E33000700000000220203282000000A2A26020304282100000A2A1E02282200000A2A3202282300000A282400000A2A2202281A00000A262A000000133002000F00000003000011732600000A0A06026F2700000A062A00133004005C00000004000011027423000001732800000A0A03066F2900000A5504066F2A00000A810600000105066F2B00000A81060000010E04066F2C00000A81060000010E05066F2D00000A8C260000016F2E00000A720100007072050000706F2F00000A512A1330040084000000050000110203283000000A0A0203283100000A0B068E69078E69588D030000020C160D2B2008098F0300000206099A7D0100000408098F03000002177D020000040917580D09068E6932DA068E6913042B290811048F03000002071104068E69599A7D010000040811048F03000002167D020000041104175813041104068E69078E695832CC082A13300600840000000600001102A5030000020A0312007B01000004510512007B020000045205462C560350733200000A0B0E04076F2A00000A81060000010E05076F2B00000A81060000010E06076F2C00000A81060000010E07076F2D00000A8C260000016F2E00000A720100007072050000706F2F00000A5104166A552A0350040E040E050E060E0728090000062A1E02283300000A2A42534A4201000100000000000C00000076322E302E35303732370000000005006C000000BC040000237E000028050000C805000023537472696E677300000000F00A00000800000023555300F80A0000100000002347554944000000080B00000C02000023426C6F620000000000000002000001571502080902000000FA253300160000010000002800000003000000020000000C0000001D0000003400000010000000060000000100000001000000020000000100000000000A000100000000000600390032000600400032000A006B0056000A00A40056000600DD00CA000600F20032000600B201930106001202000206002902000206004602000206006502000206007E0200020600970200020600B20200020600CD0200020600E60293010600FA029301060008030002060021030002060051033E035300650300000600940374030600B40374030A00F803DD03060018040E0406001D040E04060031040E0406003E040E04060060040E04060076040E04060087040E0406009C040E040A00D604DD0306000605EB040600110532000600E9000E04060018050E0406005D050E040600A40593010600BA059301000000000100000000000100010001001000190000000500010001000A01100020000000090001000D00060029016900060032016C00502000000000960074000A00010098200000000096007D0010000200F020000000009600870018000500F92000000000960090001E0007000321000000009600990025000A000B21000000009600AF002A000B001821000000009600BA0025000C002421000000009600E90030000D004021000000009600FB0036000E00A8210000000096000B0148001400382200000000960017014F001600C822000000008618230165001E00000001002901000001002901000002003E01000003004301000001002901000002005201000001005E01000002006D01000003007A01000001002901000001002901000001008401000001002901000001002901020002008C0102000300BF0102000400CA0102000500D90102000600E70100000100840100000200F20100000100FA01020002002901020003008C0102000400320102000500BF0102000600CA0102000700D90102000800E701390023016500410023016F00490023016F00510023016F00590023016F00610023016F00690023016F00710023016F00790023016F00810023017400890023016F00910023016F00990023016F00A10023017900B10023017F00B90023016500C10023016500C90028048900D90023018F00E10045049500D90050049900D9005A046500190023019F00E9006504AE00F1008004B300F100BA00B800C90095048900010123018F001900A904BE000101B3049F0001015A046500C900B9041800C900BE041E00C900C3042500C9008004B3002100CA04CA000901230165000C00230165000C000D050001210123016F00210145049500290127050F01290138050F0129014B050F0129016C05140109007B051A01190184051E01F1008C054F01F1009B054F01F90023016F0009002301650039012301690120008B0084002E00330070012E003B0089012E00130070012E001B0083012E00230083012E002B0083012E005B00A1012E008300EA012E00430083012E00530083012E006B00CB012E007300D8012E007B00E10100012B01D00040012B012A01A500C3000601240156016201F900048000000100000000000000000000000000D2030000020000000000000000000000010029000000000002000000000000000000000001004A0000000000030002000000003C4D6F64756C653E005544502E46696C65494F2E646C6C0046696C65494F0046696C654C697374006D73636F726C69620053797374656D004F626A6563740056616C7565547970650053797374656D2E446174610053797374656D2E446174612E53716C54797065730053716C42797465730046696C65526561640046696C6557726974650046696C654D6F76650046696C65436F70790046696C6544656C6574650053716C426F6F6C65616E0046696C65457869737473004372656174654469726563746F72790053797374656D2E436F6C6C656374696F6E730049456E756D657261626C650046696C65496E666F004461746554696D650046696C6C46696C65496E666F526F770047657446696C654C6973740046696C654C697374526F77002E63746F720046696C654E616D650049734469726563746F7279004461746100466F7263654469726563746F7279004E657746696C654E616D6500536F7572636546696C654E616D65004465737446696C654E616D65004F7665727772697465004469724E616D65004C656E6774680053797374656D2E52756E74696D652E496E7465726F705365727669636573004F75744174747269627574650043726561746554696D65004C61737441636365737354696D65004C617374577269746554696D650041747472696275746573005061747465726E00464C6973740053797374656D2E5265666C656374696F6E00417373656D626C795469746C6541747472696275746500417373656D626C794465736372697074696F6E41747472696275746500417373656D626C79436F6E66696775726174696F6E41747472696275746500417373656D626C79436F6D70616E7941747472696275746500417373656D626C7950726F6475637441747472696275746500417373656D626C79436F7079726967687441747472696275746500417373656D626C7954726164656D61726B41747472696275746500417373656D626C7943756C7475726541747472696275746500436F6D56697369626C65417474726962757465004775696441747472696275746500417373656D626C7956657273696F6E41747472696275746500417373656D626C7946696C6556657273696F6E4174747269627574650053797374656D2E446961676E6F73746963730044656275676761626C6541747472696275746500446562756767696E674D6F6465730053797374656D2E52756E74696D652E436F6D70696C6572536572766963657300436F6D70696C6174696F6E52656C61786174696F6E734174747269627574650052756E74696D65436F6D7061746962696C697479417474726962757465005544502E46696C65494F004D6963726F736F66742E53716C5365727665722E5365727665720053716C50726F6365647572654174747269627574650053797374656D2E494F0046696C650046696C6553747265616D004F70656E526561640042696E6172795265616465720053747265616D006765745F4C656E6774680052656164427974657300436C6F73650050617468004765744469726563746F72794E616D65004469726563746F727900457869737473004469726563746F7279496E666F004372656174650042696E617279577269746572006765745F56616C7565005772697465004D6F766500436F70790044656C657465006F705F496D706C696369740053716C46756E6374696F6E4174747269627574650053797374656D2E436F6C6C656374696F6E732E47656E65726963004C69737460310041646400537472696E670046696C6553797374656D496E666F006765745F4372656174696F6E54696D65006765745F4C61737441636365737354696D65006765745F4C617374577269746554696D650046696C6541747472696275746573006765745F4174747269627574657300546F537472696E67005265706C616365004765744469726563746F726965730047657446696C6573005374727563744C61796F7574417474726962757465004C61796F75744B696E64000000000003200000010000AAC335574E5B6140BAE4EB9D8790711F0008B77A5C561934E089050001120D0E070003010E120D02050002010E0E060003010E0E02040001010E05000111110E05000112150E110006011C100A101119101119101119100E06000212150E0E150008011C100E100A1002101119101119101119100E0320000102060E020602042001010E04200101020520010111550420010108040100000005000112690E0520010112710320000A0520011D0508052001011D050807031269126D1D050400010E0E040001020E050001127D0E0420001D050607020E1280810500011111022801000100540E1146696C6C526F774D6574686F644E616D650F46696C6C46696C65496E666F526F770615128089010E05200101130008070115128089010E04200011190520001180990320000E0520020E0E0E0507011280912401000100540E1146696C6C526F774D6574686F644E616D650B46696C654C697374526F770600021D0E0E0E0B07051D0E1D0E1D110C0808060702110C127D062001011180A11201000D436C6173734C69627261727931000005010000000017010012436F7079726967687420C2A920203230303800002901002436336232356639342D633661392D343239322D386566622D38633162346235623163633100000C010007312E302E302E3000000801000200000000000801000800000000001E01000100540216577261704E6F6E457863657074696F6E5468726F77730100000000000000CEA0804F0000000002000000660000000030000000120000525344534D6A8DB494E2F645A964D62F9643318203000000443A5C576F726B5C50726F6A656374735C457874656E6465642053746F7265642050726F636564757265735C46696C65494F5C6F626A5C52656C656173655C5544502E46696C65494F2E706462000000903000000000000000000000AE300000002000000000000000000000000000000000000000000000A030000000000000000000000000000000005F436F72446C6C4D61696E006D73636F7265652E646C6C0000000000FF25002040000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100100000001800008000000000000000000000000000000100010000003000008000000000000000000000000000000100000000004800000058400000C80200000000000000000000C80234000000560053005F00560045005200530049004F004E005F0049004E0046004F0000000000BD04EFFE00000100000001000000000000000100000000003F000000000000000400000002000000000000000000000000000000440000000100560061007200460069006C00650049006E0066006F00000000002400040000005400720061006E0073006C006100740069006F006E00000000000000B00428020000010053007400720069006E006700460069006C00650049006E0066006F00000004020000010030003000300030003000340062003000000044000E000100460069006C0065004400650073006300720069007000740069006F006E000000000043006C006100730073004C0069006200720061007200790031000000300008000100460069006C006500560065007200730069006F006E000000000031002E0030002E0030002E003000000040000F00010049006E007400650072006E0061006C004E0061006D00650000005500440050002E00460069006C00650049004F002E0064006C006C00000000004800120001004C006500670061006C0043006F007000790072006900670068007400000043006F0070007900720069006700680074002000A900200020003200300030003800000048000F0001004F0072006900670069006E0061006C00460069006C0065006E0061006D00650000005500440050002E00460069006C00650049004F002E0064006C006C00000000003C000E000100500072006F0064007500630074004E0061006D0065000000000043006C006100730073004C0069006200720061007200790031000000340008000100500072006F006400750063007400560065007200730069006F006E00000031002E0030002E0030002E003000000038000800010041007300730065006D0062006C0079002000560065007200730069006F006E00000031002E0030002E0030002E00300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003000000C000000C03000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
WITH PERMISSION_SET = EXTERNAL_ACCESS
GO


SET ANSI_NULLS OFF
GO
SET QUOTED_IDENTIFIER OFF
GO
CREATE FUNCTION [File].[Find](@Directory [nvarchar](4000), @Pattern [nvarchar](4000) = N'*.*')
RETURNS  TABLE (
	[FileName] [nvarchar](4000) NULL,
	[Length] [bigint] NULL,
	[IsDirectory] [bit] NULL,
	[CreateTime] [datetime] NULL,
	[LastAccessTime] [datetime] NULL,
	[LastWriteTime] [datetime] NULL,
	[Attributes] [nvarchar](100) NULL
) WITH EXECUTE AS CALLER
AS 
EXTERNAL NAME [UDP.FileIO].[FileIO].[GetFileList]
GO


[BD-SRV-TTN-CL1].[opendb].[File].[Find]
[BD-SRV-TTN-CL1].[opendb].[File].[Info]


SELECT *
from [file].[find]('Disk:\dir','*')

